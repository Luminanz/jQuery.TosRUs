/*	
 * jQuery Touch Optimized Sliders "R"Us
 * Youtube media
 *
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 * @requires tosrus 2.0.0 or later
 */
!function(t){function i(i){function u(){var t=i.width(),o=i.height();p&&t>p&&(t=p),g&&o>g&&(o=g),m>t/o?o=t/m:t=o*m,l.width(t).height(o)}function h(t){l.length&&l[0].contentWindow.postMessage('{ "event": "command", "func": "'+t+'Video" }',"*")}d||(o=t[s]._c,n=t[s]._d,e=t[s]._e,a=t[s]._f,r=t[s]._g,d=!0);var l=i.children(),f=i.data(t[s]._d.anchor)||t(),m=f.data(n.ratio)||this.opts[c].ratio,p=f.data(n.maxWidth)||this.opts[c].maxWidth,g=f.data(n.maxHeight)||this.opts[c].maxHeight;i.removeClass(o.loading).on(e.loading,function(){u()}),this.nodes.$wrpr.on(e.sliding,function(){h("pause")}).on(e.closing,function(){h("stop")}),r.$wndw.on(e.resize,function(){u()})}var o,n,e,a,r,s="tosrus",c="youtube",d=!1;t[s].media[c]={filterAnchors:function(t){return t.toLowerCase().indexOf("youtube.com/watch?v=")>-1},initAnchors:function(o,n){var e=n;n=n.split("?v=")[1].split("&")[0],this.opts[c].imageLink?(n="http://img.youtube.com/vi/"+n+"/0.jpg",t('<a href="'+e+'" class="'+t[s]._c("play")+'" target="_blank" />').appendTo(o),t('<img border="0" />').on(t[s]._e.load,function(i){i.stopPropagation(),o.removeClass(t[s]._c.loading)}).appendTo(o).attr("src",n)):(t('<iframe src="http://www.youtube.com/embed/'+n+'" frameborder="0" allowfullscreen />').appendTo(o),i.call(this,o))},filterSlides:function(t){return t.is("iframe")&&t.attr("src")?t.attr("src").toLowerCase().indexOf("youtube.com/embed/")>-1:!1},initSlides:function(t){i.call(this,t)}},t[s].defaults[c]={ratio:16/9,maxWidth:!1,maxHeight:!1,imageLink:t[s].support.touch}}(jQuery);