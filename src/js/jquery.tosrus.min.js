/*
 *	jQuery Touch Optimized Sliders "R"Us 2.0.0
 *	
 *	Copyright (c) Fred Heusschen
 *	www.frebsite.nl
 *
 *	Plugin website:
 *	tosrus.frebsite.nl
 *
 *	Dual licensed under the MIT and GPL licenses.
 *	http://en.wikipedia.org/wiki/MIT_License
 *	http://en.wikipedia.org/wiki/GNU_General_Public_License
 */
!function(s){function i(){o=function(s){return e+"-"+s},d=function(s){return e+"-"+s},r=function(s){return s+"."+e},s.each([o,d,r],function(s,i){i.add=function(s){s=s.split(" ");for(var t in s)i[s[t]]=i(s[t])}}),o.add("noanimation fastanimation opened opening wrapper slider slide html loading fixed inline touch desktop hover"),d.add("content slide anchor ratio maxWidth maxHeight index"),r.add("open opening close closing prev next slideTo sliding click keyup scroll orientationchange load loading transitionend webkitTransitionEnd"),a={complObject:function(i,t){return s.isPlainObject(i)||(i=t),i},complBoolean:function(s,i){return"boolean"!=typeof s&&(s=i),s},complNumber:function(i,t){return s.isNumeric(i)||(i=t),i},complString:function(s,i){return"string"!=typeof s&&(s=i),s},isPercentage:function(s){return"string"==typeof s&&"%"==s.slice(-1)},getPercentage:function(s){return parseInt(s.slice(0,-1))},transitionend:function(s,i,t){var e=!1,n=function(){e||i.call(s[0]),e=!0};s.one(r.transitionend,n),s.one(r.webkitTransitionEnd,n),setTimeout(n,1.1*t)},setViewportScale:function(){l.$body.addClass(o("scale-"+Math.max(Math.min(Math.round(s(document).width()/window.outerWidth),3),1)))}},l={$wndw:s(window),$html:s("html"),$body:s("body"),scrollPosition:0},l.$body.addClass(s[t].support.touch?o.touch:o.desktop),l.$wndw.on(r.scroll,function(s){l.$body.hasClass(o.opened)&&(window.scrollTo(0,l.scrollPosition),s.preventDefault(),s.stopPropagation(),s.stopImmediatePropagation())}),a.setViewportScale(),l.$wndw.on(r.orientationchange,function(){a.setViewportScale()}),s[t]._c=o,s[t]._d=d,s[t]._e=r,s[t]._f=a,s[t]._g=l}var t="tosrus",e="tos",n="2.0.0";if(!s[t]){var o={},d={},r={},a={},l={};s[t]=function(s,i,t){return this.$node=s,this.opts=i,this.conf=t,this.vars={},this.nodes={},this.slides={},this._init(),this},s[t].prototype={_init:function(){var i=this;this._complementOptions(),this.vars.fixed="window"==this.opts.wrapper.target,this.nodes.$wrpr=s('<div class="'+o.wrapper+'" />'),this.nodes.$sldr=s('<div class="'+o.slider+'" />').appendTo(this.nodes.$wrpr),this.nodes.$wrpr.addClass(this.vars.fixed?o.fixed:o.inline).addClass(o("fx-"+this.opts.effect)).addClass(o(this.opts.slides.scale)).addClass(this.opts.wrapper.classes),this.nodes.$wrpr.on(r.open+" "+r.close+" "+r.prev+" "+r.next+" "+r.slideTo,function(s){arguments=Array.prototype.slice.call(arguments);var s=arguments.shift(),t=s.type;s.stopPropagation(),"function"==typeof i[t]&&i[t].apply(i,arguments)}).on(r.click,function(s){s.stopPropagation(),i.nodes.$wrpr.toggleClass(o.hover)}),this.nodes.$anchors=this._initAnchors(),this.nodes.$slides=this._initSlides(),this.slides.total=this.nodes.$slides.length,this.slides.visible=this.opts.slides.visible,this.slides.index=0,this.vars.opened=!0;for(var e=0;e<s[t].addons.length;e++)s.isFunction(this["_addon_"+s[t].addons[e]])&&this["_addon_"+s[t].addons[e]]();for(var n=0;n<s[t].ui.length;n++)this.nodes.$wrpr.find("."+o[s[t].ui[n]]).length&&this.nodes.$wrpr.addClass(o("has-"+s[t].ui[n]));this.vars.fixed?(this.nodes.$wrpr.appendTo(l.$body),this.close(!0)):(this.nodes.$wrpr.appendTo(this.opts.wrapper.target),this.opts.show?(this.vars.opened=!1,this.open(0,!0)):this.close(!0))},open:function(i,t){var e=this;this.vars.opened||(this.vars.fixed&&(l.scrollPosition=l.$wndw.scrollTop(),l.$body.addClass(o.opened)),t?this.nodes.$wrpr.addClass(o.opening).trigger(r.opening,[i,t]):setTimeout(function(){e.nodes.$wrpr.addClass(o.opening).trigger(r.opening,[i,t])},5),this.nodes.$wrpr.addClass(o.hover).addClass(o.opened)),this.vars.opened=!0,this._loadContents(),s.isNumeric(i)&&(t=t||!this.vars.opened,this.slideTo(i,t))},close:function(i){this.vars.opened&&(this.vars.fixed&&l.$body.removeClass(o.opened),i?this.nodes.$wrpr.removeClass(o.opened):a.transitionend(this.nodes.$wrpr,function(){s(this).removeClass(o.opened)},this.conf.transitionDuration),this.nodes.$wrpr.removeClass(o.hover).removeClass(o.opening).trigger(r.closing,[this.slides.index,i])),this.vars.opened=!1},prev:function(i,t){s.isNumeric(i)||(i=this.opts.slides.slide),this.slideTo(this.slides.index-i,t)},next:function(i,t){s.isNumeric(i)||(i=this.opts.slides.slide),this.slideTo(this.slides.index+i,t)},slideTo:function(i,e){if(!this.vars.opened)return!1;if(!s.isNumeric(i))return!1;var n=!0;if(0>i){var d=0==this.slides.index;this.opts.infinite?i=d?this.slides.total-this.slides.visible:0:(i=0,d&&(n=!1))}if(i+this.slides.visible>this.slides.total){var l=this.slides.index+this.slides.visible>=this.slides.total;this.opts.infinite?i=l?0:this.slides.total-this.slides.visible:(i=this.slides.total-this.slides.visible,l&&(n=!1))}if(this.slides.index=i,this._loadContents(),n){var h=0-this.slides.index*this.opts.slides.width+this.opts.slides.offset;this.slides.widthPercentage&&(h+="%"),e&&(this.nodes.$sldr.addClass(o.noanimation),a.transitionend(this.nodes.$sldr,function(){s(this).removeClass(o.noanimation)},5));for(var c in s[t].effects)if(c==this.opts.effect){s[t].effects[c].call(this,h,e);break}this.nodes.$wrpr.trigger(r.sliding,[i,e])}},_initAnchors:function(){var i=this,e=s();if(this.$node.is("a"))for(var n in s[t].media)e=e.add(this.$node.filter(function(){return s[t].media[n].filterAnchors.call(i,s(this).attr("href"))}));return e},_initSlides:function(){return this[this.$node.is("a")?"_initSlidesFromAnchors":"_initSlidesFromContent"](),this.nodes.$sldr.children().css("width",this.opts.slides.width+(this.slides.widthPercentage?"%":""))},_initSlidesFromAnchors:function(){var i=this;this.nodes.$anchors.each(function(t){var e=s(this),n=s('<div class="'+o.slide+" "+o.loading+'" />').data(d.anchor,e).appendTo(i.nodes.$sldr);e.data(d.slide,n).on(r.click,function(s){s.preventDefault(),i.open(t)})})},_initSlidesFromContent:function(){var i=this;this.$node.children().each(function(){var e=s(this);s('<div class="'+o.slide+'" />').append(e).appendTo(i.nodes.$sldr);for(var n in s[t].media)if(s[t].media[n].filterSlides.call(i,e)){s[t].media[n].initSlides.call(i,e),e.parent().addClass(o(n));break}})},_loadContents:function(){var s=this;switch(this.opts.slides.load){case"all":this._loadContent(0,this.slides.total);break;case"visible":this._loadContent(this.slides.index,this.slides.index+this.slides.visible);break;case"near-visible":default:this._loadContent(this.slides.index,this.slides.index+this.slides.visible),setTimeout(function(){s._loadContent(s.slides.index-s.slides.visible,s.slides.index),s._loadContent(s.slides.index+s.slides.visible,s.slides.index+2*s.slides.visible)},this.conf.transitionDuration)}},_loadContent:function(i,e){var n=this;this.nodes.$slides.slice(i,e).each(function(){var i=s(this);if(0==i.children().length){var e=i.data(d.anchor).attr("href");for(var a in s[t].media)if(s[t].media[a].filterAnchors.call(n,e)){s[t].media[a].initAnchors.call(n,i,e),i.addClass(o(a));break}i.trigger(r.loading,[i.data(d.anchor)])}})},_complementOptions:function(){if("undefined"==typeof this.opts.wrapper.target&&(this.opts.wrapper.target=this.$node.is("a")?"window":this.$node),"window"!=this.opts.wrapper.target&&"string"==typeof this.opts.wrapper.target&&(this.opts.wrapper.target=s(this.opts.wrapper.target)),this.opts.show=a.complBoolean(this.opts.show,"window"!=this.opts.wrapper.target),s.isNumeric(this.opts.slides.width))this.slides.widthPercentage=!1,this.opts.slides.visible=a.complNumber(this.opts.slides.visible,1);else{var i=a.isPercentage(this.opts.slides.width)?a.getPercentage(this.opts.slides.width):!1;this.slides.widthPercentage=!0,this.opts.slides.visible=a.complNumber(this.opts.slides.visible,i?Math.floor(100/i):1),this.opts.slides.width=i?i:Math.ceil(1e4/this.opts.slides.visible)/100}this.opts.slides.slide=a.complNumber(this.opts.slides.slide,this.opts.slides.visible),this.opts.slides.offset=a.isPercentage(this.opts.slides.offset)?a.getPercentage(this.opts.slides.offset):a.complNumber(this.opts.slides.offset,0)}},s.fn[t]=function(e,n,o,d){l.$wndw||i(),e=s.extend(!0,{},s[t].defaults,e),e=s.extend(!0,{},e,s[t].support.touch?o:n),d=s.extend(!0,{},s[t].configuration,d);var r=new s[t](this,e,d);return this.data(t,r),r.nodes.$wrpr},s[t].support={touch:"ontouchstart"in window.document},s[t].defaults={infinite:!1,effect:"slide",wrapper:{classes:""},slides:{offset:0,scale:"fit",load:"near-visible",visible:1}},s[t].configuration={transitionDuration:400},s[t].debug=function(){},s[t].deprecated=function(s,i){"undefined"!=typeof console&&"undefined"!=typeof console.warn&&console.warn(t+": "+s+" is deprecated, use "+i+" instead.")},s[t].effects={slide:function(s){var s="translateX("+s+")";this.nodes.$sldr.css({"-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s})},fade:function(i){a.transitionend(this.nodes.$sldr,function(){s(this).css("left",i).css("opacity",1)},this.conf.transitionDuration),this.nodes.$sldr.css("opacity",0)}},s[t].version=n,s[t].media={},s[t].addons=[],s[t].ui=[]}}(jQuery);